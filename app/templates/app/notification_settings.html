{% extends 'base.html' %}
{% load static %}

{% block content %}
<div style="max-width: 800px; margin: 0 auto;">
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
    <h2><i class="fas fa-cog"></i> Notification Settings</h2>
    <a href="{% url 'notification-list' %}" class="btn" style="text-decoration: none;">
      <i class="fas fa-arrow-left"></i> Back to Notifications
    </a>
  </div>

  <form method="post" class="settings-form">
    {% csrf_token %}

    <!-- Thresholds Section -->
    <div class="settings-section">
      <h3><i class="fas fa-sliders-h"></i> Stock Alert Thresholds</h3>
      <p style="color: #667085; font-size: 14px; margin-bottom: 1.5rem;">
        Set the stock levels that trigger notifications for your items.
      </p>

      <div class="form-group">
        <label for="id_low_stock_threshold">
          <i class="fas fa-exclamation-circle" style="color: #f59e0b;"></i>
          Low Stock Threshold
        </label>
        {{ form.low_stock_threshold }}
        <p class="help-text">You'll be notified when stock falls below this number (default: 10)</p>
      </div>

      <div class="form-group">
        <label for="id_critical_stock_threshold">
          <i class="fas fa-exclamation-triangle" style="color: #ef4444;"></i>
          Critical Stock Threshold
        </label>
        {{ form.critical_stock_threshold }}
        <p class="help-text">Critical alerts when stock falls below this number (default: 5)</p>
      </div>
    </div>

    <!-- Notification Types Section -->
    <div class="settings-section">
      <h3><i class="fas fa-toggle-on"></i> Notification Types</h3>
      <p style="color: #667085; font-size: 14px; margin-bottom: 1.5rem;">
        Choose which types of notifications you want to receive.
      </p>

      <div class="form-group">
        <label style="display: flex; align-items: center; cursor: pointer;">
          {{ form.enable_low_stock_alerts }}
          <span style="margin-left: 0.5rem;">
            <i class="fas fa-box" style="color: #f59e0b;"></i>
            Low Stock Alerts
          </span>
        </label>
        <p class="help-text">Get notified when items are running low on stock</p>
      </div>

      <div class="form-group">
        <label style="display: flex; align-items: center; cursor: pointer;">
          {{ form.enable_delivery_alerts }}
          <span style="margin-left: 0.5rem;">
            <i class="fas fa-truck" style="color: #3b82f6;"></i>
            Delivery Alerts
          </span>
        </label>
        <p class="help-text">Get notified about delivery status changes</p>
      </div>

      <div class="form-group">
        <label style="display: flex; align-items: center; cursor: pointer;">
          {{ form.enable_move_alerts }}
          <span style="margin-left: 0.5rem;">
            <i class="fas fa-exchange-alt" style="color: #8b5cf6;"></i>
            Item Movement Alerts
          </span>
        </label>
        <p class="help-text">Get notified when items are moved between locations</p>
      </div>
    </div>

    <!-- Behavior Section -->
    <div class="settings-section">
      <h3><i class="fas fa-magic"></i> Notification Behavior</h3>
      <p style="color: #667085; font-size: 14px; margin-bottom: 1.5rem;">
        Customize how notifications behave in the application.
      </p>

      <div class="form-group">
        <label style="display: flex; align-items: center; cursor: pointer;">
          {{ form.auto_mark_read }}
          <span style="margin-left: 0.5rem;">
            <i class="fas fa-eye" style="color: #10b981;"></i>
            Auto-mark as Read
          </span>
        </label>
        <p class="help-text">Automatically mark notifications as read when you view them</p>
      </div>
    </div>

    <!-- Save Button -->
    <div style="display: flex; justify-content: flex-end; gap: 0.75rem; margin-top: 2rem;">
      <a href="{% url 'notification-list' %}" class="btn" style="text-decoration: none;">
        <i class="fas fa-times"></i> Cancel
      </a>
      <button type="submit" class="btn" style="background: #6366f1; color: white; border-color: #6366f1;">
        <i class="fas fa-save"></i> Save Settings
      </button>
    </div>
  </form>

  <!-- Info Box -->
  <div style="margin-top: 2rem; padding: 1.25rem; background: #eff6ff; border: 1px solid #bfdbfe; border-radius: 12px;">
    <h4 style="color: #1e40af; margin-bottom: 0.5rem; font-size: 15px;">
      <i class="fas fa-info-circle"></i> How Notifications Work
    </h4>
    <ul style="color: #1e40af; font-size: 14px; margin-left: 1.5rem; line-height: 1.8;">
      <li>Notifications are created automatically when important events occur</li>
      <li>You'll see a badge counter in the navbar showing unread notifications</li>
      <li>Low stock alerts check your inventory after every item update</li>
      <li>Delivery notifications track the full lifecycle of your deliveries</li>
      <li>Movement alerts help you track items across different locations</li>
    </ul>
  </div>
</div>

<style>
  .settings-form input[type="number"] {
    max-width: 200px;
  }

  .form-group input[type="checkbox"] {
    width: 18px;
    height: 18px;
    cursor: pointer;
  }

  .settings-form .btn:hover {
    transform: translateY(-1px);
  }
</style>

{% endblock %}

