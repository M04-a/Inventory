{% extends 'base.html' %}
{% block content %}

<div style="max-width: 900px; margin: 2rem auto;">
  <div style="margin-bottom: 2rem;">
    <a href="{% url 'delivery-list' %}" class="btn btn-cancel" style="text-decoration: none; margin-bottom: 1rem; display: inline-flex;">
      <i class="fas fa-arrow-left"></i> Back to deliveries
    </a>

    <h2 style="color: #101828; font-size: 24px; font-weight: 700; margin: 0; display: flex; align-items: center;">
      <i class="fas fa-shipping-fast" style="color: #6366f1; margin-right: 0.75rem;"></i>
      Delivery #{{ delivery.id }}
    </h2>
  </div>

  <div style="display: grid; gap: 1.5rem;">
    <!-- Status Card -->
    <div style="background: white; border-radius: 16px; padding: 2rem; border: 1px solid #e5e7eb; box-shadow: 0 4px 12px rgba(0,0,0,0.06);">
      <h3 style="color: #101828; font-size: 18px; font-weight: 600; margin: 0 0 1.5rem; display: flex; align-items: center;">
        <i class="fas fa-info-circle" style="color: #6366f1; margin-right: 0.65rem;"></i>
        Status
      </h3>

      <div style="display: flex; justify-content: space-between; align-items: center;">
        <div>
          {% if delivery.status == 'in_progress' %}
            <span style="background: #fef3c7; color: #92400e; padding: 0.5rem 1rem; border-radius: 8px; font-size: 14px; font-weight: 600; display: inline-flex; align-items: center;">
              <i class="fas fa-clock" style="margin-right: 0.5rem;"></i>
              In Progress
            </span>
          {% elif delivery.status == 'finished' %}
            <span style="background: #dcfce7; color: #166534; padding: 0.5rem 1rem; border-radius: 8px; font-size: 14px; font-weight: 600; display: inline-flex; align-items: center;">
              <i class="fas fa-check-circle" style="margin-right: 0.5rem;"></i>
              Finished
            </span>
          {% else %}
            <span style="background: #fee2e2; color: #991b1b; padding: 0.5rem 1rem; border-radius: 8px; font-size: 14px; font-weight: 600; display: inline-flex; align-items: center;">
              <i class="fas fa-times-circle" style="margin-right: 0.5rem;"></i>
              Cancelled
            </span>
          {% endif %}
        </div>

        <!-- Action Buttons -->
        {% if delivery.status == 'in_progress' %}
          <div style="display: flex; gap: 0.75rem;">
            <a href="{% url 'delivery-update' delivery.id %}" class="btn" style="text-decoration: none;">
              <i class="fas fa-edit"></i> Update
            </a>
            <a href="{% url 'delivery-cancel' delivery.id %}"
               class="btn btn-delete"
               style="text-decoration: none;"
               onclick="return confirm('Are you sure you want to cancel this delivery? Stock will be restored.');">
              <i class="fas fa-times"></i> Cancel
            </a>
          </div>
        {% endif %}
      </div>
    </div>

    <!-- Item Details -->
    <div style="background: white; border-radius: 16px; padding: 2rem; border: 1px solid #e5e7eb; box-shadow: 0 4px 12px rgba(0,0,0,0.06);">
      <h3 style="color: #101828; font-size: 18px; font-weight: 600; margin: 0 0 1.5rem; display: flex; align-items: center;">
        <i class="fas fa-box" style="color: #6366f1; margin-right: 0.65rem;"></i>
        Item Information
      </h3>

      <div style="display: grid; gap: 1rem;">
        <div>
          <p style="color: #667085; font-size: 13px; margin: 0 0 0.25rem;">Item Name</p>
          <p style="color: #101828; font-size: 16px; font-weight: 600; margin: 0;">{{ delivery.item.name }}</p>
        </div>
        <div>
          <p style="color: #667085; font-size: 13px; margin: 0 0 0.25rem;">SKU</p>
          <p style="color: #101828; font-size: 16px; font-weight: 500; font-family: 'Courier New', monospace; margin: 0;">{{ delivery.item.sku }}</p>
        </div>
        <div>
          <p style="color: #667085; font-size: 13px; margin: 0 0 0.25rem;">Quantity in Delivery</p>
          <p style="color: #101828; font-size: 16px; font-weight: 600; margin: 0;">
            <span style="background: #f0f9ff; color: #0284c7; padding: 0.375rem 0.875rem; border-radius: 6px;">
              {{ delivery.quantity }} pcs
            </span>
          </p>
        </div>
      </div>
    </div>

    <!-- Location Information -->
    <div style="background: white; border-radius: 16px; padding: 2rem; border: 1px solid #e5e7eb; box-shadow: 0 4px 12px rgba(0,0,0,0.06);">
      <h3 style="color: #101828; font-size: 18px; font-weight: 600; margin: 0 0 1.5rem; display: flex; align-items: center;">
        <i class="fas fa-map-marker-alt" style="color: #6366f1; margin-right: 0.65rem;"></i>
        Location
      </h3>

      <div style="display: grid; gap: 1.5rem;">
        <div>
          <p style="color: #667085; font-size: 13px; margin: 0 0 0.75rem; font-weight: 600;">From (Origin)</p>
          <div style="background: #f9fafb; border-radius: 10px; padding: 1rem; border: 1px solid #e5e7eb;">
            <p style="color: #101828; font-size: 14px; margin: 0 0 0.25rem;"><strong>{{ delivery.from_city }}</strong>, {{ delivery.from_building }}</p>
            <p style="color: #667085; font-size: 13px; margin: 0;">{{ delivery.from_address }}</p>
          </div>
        </div>

        {% if delivery.to_city %}
          <div>
            <p style="color: #667085; font-size: 13px; margin: 0 0 0.75rem; font-weight: 600;">To (Destination)</p>
            <div style="background: #f0f9ff; border-radius: 10px; padding: 1rem; border: 1px solid #bae6fd;">
              <p style="color: #101828; font-size: 14px; margin: 0 0 0.25rem;"><strong>{{ delivery.to_city }}</strong>, {{ delivery.to_building }}</p>
              <p style="color: #667085; font-size: 13px; margin: 0;">{{ delivery.to_address }}</p>
            </div>
          </div>
        {% else %}
          <div>
            <p style="color: #667085; font-size: 13px; margin: 0 0 0.75rem; font-weight: 600;">To (Destination)</p>
            <div style="background: #fef3f2; border-radius: 10px; padding: 1rem; border: 1px solid #fecaca;">
              <p style="color: #991b1b; font-size: 13px; margin: 0; display: flex; align-items: center;">
                <i class="fas fa-exclamation-circle" style="margin-right: 0.5rem;"></i>
                Destination not set yet
              </p>
            </div>
          </div>
        {% endif %}
      </div>
    </div>

    <!-- Timeline -->
    <div style="background: white; border-radius: 16px; padding: 2rem; border: 1px solid #e5e7eb; box-shadow: 0 4px 12px rgba(0,0,0,0.06);">
      <h3 style="color: #101828; font-size: 18px; font-weight: 600; margin: 0 0 1.5rem; display: flex; align-items: center;">
        <i class="fas fa-clock" style="color: #6366f1; margin-right: 0.65rem;"></i>
        Timeline
      </h3>

      <div style="display: grid; gap: 1rem;">
        <div>
          <p style="color: #667085; font-size: 13px; margin: 0 0 0.25rem;">Created By</p>
          <p style="color: #101828; font-size: 14px; margin: 0;">{{ delivery.created_by }}</p>
        </div>
        <div>
          <p style="color: #667085; font-size: 13px; margin: 0 0 0.25rem;">Created At</p>
          <p style="color: #101828; font-size: 14px; margin: 0;">{{ delivery.created_at|date:"F j, Y, g:i a" }}</p>
        </div>
        {% if delivery.finished_at %}
          <div>
            <p style="color: #667085; font-size: 13px; margin: 0 0 0.25rem;">Finished At</p>
            <p style="color: #101828; font-size: 14px; margin: 0;">{{ delivery.finished_at|date:"F j, Y, g:i a" }}</p>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>

{% endblock %}